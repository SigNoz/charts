suite: Missing password handling
tests:
  - it: should error if password is missing when create is true
    set:
      clickhouseOperator:
        secret:
          create: true
          name: my-ch-creds
          username: testuser
          password: ""
    template: templates/clickhouse-operator/secret.yaml
    asserts:
      - failedTemplate:
          errorMessage: "You must set .Values.clickhouseOperator.secret.password when create: true"
  - it: should error if username is missing when create is true
    set:
      clickhouseOperator:
        secret:
          create: true
          name: my-ch-creds
          username: ""
          password: testpass
    template: templates/clickhouse-operator/secret.yaml
    asserts:
      - failedTemplate:
          errorMessage: "You must set .Values.clickhouseOperator.secret.username when create: true"
